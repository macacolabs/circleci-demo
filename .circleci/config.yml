# .circleci/config.yml
version: 2.1

jobs:
  deploy:
    machine:
      image: ubuntu-2204:current
    steps:
      - add_ssh_keys:
          fingerprints:
            - "SHA256:P21MIn5VuvOJ3oHSyrHvHS8mareusEfwau4cAN4y/O0"
      - run:
          name: Run Ansible Playbook
          command: |
            ssh -o StrictHostKeyChecking=no vagrant@192.168.56.10 \
              "ansible-playbook /vagrant/playbooks/install-nginx.yml"

workflows:
  deploy-on-push:
    jobs:
      - deploy
